{% load static%}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>add employee</h1>

<form method="post" action="{%url 'createEmp' %}">
  {% csrf_token %}
        <input type="text" name="name" placeholder="name of emp" id="name"/>
      <input type="text" name="dept" placeholder="dept of emp" id="dept"/>
      <input type="email"name="email" placeholder="enter emp email " id="email" />
      <button id="addEmpBtn">addEmp</button>
      <!-- <input type="text" name="" id=""> -->
</form>

<button id="getAllEmps">getAllEmps</button>
<div id="empList"></div>

    <!-- <script src="{% static 'createEmp.js' %}"></script> -->
     <script>
  document.getElementById("getAllEmps").addEventListener("click", () => {
    // Send GET request to Django view
    fetch("{% url 'getAllEmps' %}")
      .then(response => response.json())
      .then(data => {
        const empList = document.getElementById("empList");
        empList.innerHTML = ""; // Clear previous data

        if (data.employees && data.employees.length > 0) {
          data.employees.forEach(emp => {
            // Create a card for each employee
            const card = document.createElement("div");
            card.style.border = "1px solid #ccc";
            card.style.borderRadius = "5px";
            card.style.padding = "10px";
            card.style.margin = "10px";
            card.style.width = "200px";
            card.style.display = "inline-block";

            card.innerHTML = `
              <h3>${emp.name}</h3>
              <p><strong>Dept:</strong> ${emp.dept}</p>
              <p><strong>Email:</strong> ${emp.email}</p>
            `;
            empList.appendChild(card);
          });
        } else {
          empList.innerHTML = "<p>No employees found</p>";
        }
      })
      .catch(err => console.error("Error fetching employees:", err));
  });
</script>

  </body>
</html>
